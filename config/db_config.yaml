# Конфиг БД для DAO: коллекции и их индексы.
# Направления: ASC/DESC. Доп. опции (unique/sparse/partialFilterExpression) — по месту.
collections:
  files:
    indexes:
      - name: ix_name
        keys: [["name", "ASC"]]
      - name: ix_batch_sample
        keys: [["batch", "ASC"], ["sample", "ASC"]]
      - name: ix_stat_dev_ino
        unique: true
        keys: [["dev", "ASC"], ["ino", "ASC"]]
      - name: ix_fingerprint
        unique: true
        keys: [["fingerprint", "ASC"]]

  batches:
    indexes:
      - name: ix_name
        keys: [["name", "ASC"]]
      - name: ix_curation
        keys: [["needs_curation", "ASC"]]
      - name: ix_status
        keys: [["status", "ASC"]]
      - name: ix_updated_at
        keys: [["updated_at", "DESC"]]
      - name: ix_fingerprint
        unique: true
        keys: [["fingerprint", "ASC"]]

  samples:
    indexes:
      - name: ix_name
        keys: [["name", "ASC"]]
      - name: uq_batches
        keys: [["batches", "ASC"]]
      - name: ix_status
        keys: [["status", "ASC"]]
      - name: ix_curation
        keys: [["needs_curation", "ASC"]]
      - name: ix_updated_at
        keys: [["modified", "DESC"]]
      - name: ix_fingerprint
        unique: true
        keys: [["fingerprint", "ASC"]]

  curations:
    indexes:
      - name: ix_name
        keys: [["name", "ASC"]]
      - name: ix_fingerprint
        unique: true
        keys: [["fingerprint", "ASC"]]

  changes:
    indexes:
      - name: ix_name
        keys: [["name", "ASC"]]
      - name: ix_fingerprint
        unique: true
        keys: [["fingerprint", "ASC"]]

  human:
    indexes:
      - name: ix_sample
        keys: [["sample", "ASC"]]
      - name: ix_created_at
        keys: [["created_at", "DESC"]]
